<ng-template #eventDetailsModal let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title">Event Details</h4>
    <button type="button" class="btn-close" aria-label="Close" (click)="d('Cross click')"></button>
  </div>
  <div
    class="modal-body"
    tabindex="0"
    (keydown.arrowright)="navigateModal('right')"
    (keydown.arrowleft)="navigateModal('left')"
    (keydown.arrowup)="navigateModal('up')"
    (keydown.arrowdown)="navigateModal('down')"
  >
    <!-- Display event details here -->
    <div *ngIf="selectedEvent">
      <img
        [src]="getEventImage(selectedEvent)"
        alt="Event Image"
        class="event-image"
        *ngIf="hasEventImage(selectedEvent)"
        style="width: 760px; height: 260px; margin-bottom: 2px; background-size: cover; display: flex; align-content: center"
      />
      <p class="eventModal">{{ selectedEvent.eventName }}</p>
      <p>
        <strong>Date & Time:</strong> {{ selectedEvent.eventTimeDate }}
        <span class="durationModal"> DURATION:{{ selectedEvent.duration }}</span>
      </p>
      <p><strong>Descritption: </strong> {{ selectedEvent.description }}</p>
      <div class="charity-logo-Modal" *ngIf="selectedEvent.charityProfile">
        <a [routerLink]="['/charity-profile', selectedEvent.charityProfile.id, 'view']">{{ selectedEvent.charityProfile.charityName }}</a>
      </div>
    </div>
  </div>
  <div class="modal-footer">
    <button type="button" class="btn btn-secondary" (click)="c('Close click')" (keydown.enter)="c('Close click')">Close</button>
  </div>
</ng-template>

<div>
  <h2 id="page-heading" data-cy="CharityEventHeading">
    <div class="banner-area">
      <h2 class="page-heading">Charity Events</h2>
      <span class="banner-img"></span>
    </div>

    <div class="add-event-section">
      <div class="component1">
        <button class="btn btn-info me-2" (click)="load()" [disabled]="isLoading">
          <fa-icon icon="sync" [spin]="isLoading"></fa-icon>
          <span>Refresh list</span>
        </button>

        <button
          id="jh-create-entity"
          data-cy="entityCreateButton"
          class="btn btn-primary jh-create-entity create-charity-event"
          [routerLink]="['/charity-event/new']"
          *jhiHasAnyAuthority="'ROLE_ADMIN'"
        >
          <fa-icon icon="plus"></fa-icon>
          <span> Create a new Charity Event </span>
        </button>
      </div>

      <div class="component2">
        <!--        <div class="search-box">-->
        <!--          <input type="text" placeholder="Search..." />-->
        <!--        </div>-->
        <div class="search-box-container">
          <input
            type="text"
            placeholder="Search the Event Name"
            class="search-box-input"
            [(ngModel)]="searchQuery"
            (input)="performSearch()"
          />
          <!--          <button class="search-box-button" (click)="performSearch()">-->
          <!--            <fa-icon icon="search"></fa-icon>-->
          <!--          </button>-->
        </div>
      </div>

      <div class="component3">
        <div class="filter-container">
          <select class="mighty-filter" [(ngModel)]="selectedFilter">
            <option value="none">Choose Filter...</option>
            <option value="startDate">Start Date</option>
            <option value="charityName">Charity Name</option>
            <!-- Additional filter options can be added here -->
          </select>
          <!--          <div *ngIf="selectedFilter == 'dateTime'">-->
          <!--            <input type="datetime-local" [(ngModel)]="selectedDateTime" class="date-time-picker" />-->
          <!--            <button class="filter-button" (click)="filterEventsByDateTime()">Filter</button>-->
          <!--          </div>-->

          <div *ngIf="selectedFilter === 'startDate'" class="inputBox">
            <label for="field_CharityEventStartDate">Start Date</label>
            <div class="input-group">
              <input
                id="field_CharityEventStartDate"
                data-cy="charityEventStartDate"
                type="text"
                class="form-control"
                name="charityEventStartDate"
                placeholder="yyyy-mm-dd"
                ngbDatepicker
                #startDate="ngbDatepicker"
                [(ngModel)]="dateSelector"
                (click)="startDate.toggle()"
              />
              <button type="button" class="btn btn-secondary" (click)="startDate.toggle()">
                <fa-icon icon="calendar-alt"></fa-icon>
              </button>
            </div>

            <div class="applyFilter">
              <button type="button" id="apply-filter" data-cy="applyFilterButton" class="btn btn-primary" (click)="applyFilters()">
                Apply Filters
              </button>
            </div>
          </div>

          <div *ngIf="selectedFilter === 'charityName'" class="inputBox">
            <label for="field_CharityEventCharityName">Charity Name</label>
            <input
              id="field_CharityEventCharityName"
              data-cy="charityEventCharityName"
              type="text"
              class="form-control"
              name="charityEventCharityName"
              placeholder="Enter Charity Name"
              [(ngModel)]="charityNameSelector"
            />

            <button
              type="button"
              id="apply-charity-name-filter"
              data-cy="applyCharityNameFilterButton"
              class="btn btn-primary"
              (click)="applyFilters()"
            >
              Apply Filters
            </button>
          </div>
        </div>

        <!-- charity-event.component.html -->

        <!-- Container for the date selection -->

        <!-- Button to apply the selected date as a filter -->

        <!--      <div class="component3">-->
        <!--        <div class="filter-container">-->
        <!--          <input type="datetime-local" [(ngModel)]="selectedDateTime" class="date-time-picker" />-->
        <!--          <button class="filter-button" (click)="filterEventsByDateTime()">Filter</button>-->
        <!--        </div>-->

        <!--      </div>-->
      </div>
    </div>

    <!--    <div class="charity-profile-filter">-->

    <!--         <button class = "charity-logo-button" (click)="filterByCharityProfile(null)">-->

    <!--         </button>-->

    <!--    </div>-->
  </h2>

  <jhi-alert-error></jhi-alert-error>

  <jhi-alert></jhi-alert>

  <div class="alert alert-warning" id="no-result" *ngIf="charityEvents?.length === 0">
    <span>No Charity Events found</span>
  </div>

  <div class="row" *ngIf="filteredEvents && filteredEvents.length > 0">
    <div class="col-4" *ngFor="let charityEvent of filteredEvents">
      <div class="event-box" (click)="showEventDetails(charityEvent)">
        <!-- Display event details -->
        <img
          [src]="'data:' + charityEvent?.imagesContentType + ';base64,' + charityEvent?.images"
          alt="Image"
          class="event-box"
          style="width: 350px; height: 260px; margin-bottom: 2px"
        />

        <div class="event-text-section">
          <div class="event-name">
            <span
              ><a>{{ charityEvent.eventName }}</a></span
            >
          </div>
          <div class="timings">
            {{ charityEvent.eventTimeDate }} <span class="duration"><a>Duration:</a>{{ charityEvent.duration }}<a> hr</a></span>
          </div>
          <div class="description">{{ charityEvent.description }}</div>
          <div class="charity-logo" *ngIf="charityEvent.charityProfile">
            <a [routerLink]="['/charity-profile', charityEvent.charityProfile.id, 'view']">{{ charityEvent.charityProfile.charityName }}</a>
          </div>
          <div class="event-type">{{ charityEvent.duration }}</div>
        </div>

        <div class="text-end">
          <div class="btn-group">
            <button
              type="submit"
              [routerLink]="['/charity-event', charityEvent.id, 'view']"
              class="btn btn-info btn-sm"
              data-cy="entityDetailsButton"
            >
              <fa-icon icon="eye"></fa-icon>
              <span class="d-none d-md-inline">View</span>
            </button>

            <button
              type="submit"
              [routerLink]="['/charity-event', charityEvent.id, 'edit']"
              *jhiHasAnyAuthority="'ROLE_ADMIN'"
              class="btn btn-primary btn-sm"
              data-cy="entityEditButton"
            >
              <fa-icon icon="pencil-alt"></fa-icon>
              <span class="d-none d-md-inline">Edit</span>
            </button>

            <button
              type="submit"
              (click)="delete(charityEvent)"
              class="btn btn-danger btn-sm"
              data-cy="entityDeleteButton"
              *jhiHasAnyAuthority="'ROLE_ADMIN'"
            >
              <fa-icon icon="times"></fa-icon>
              <span class="d-none d-md-inline">Delete</span>
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
